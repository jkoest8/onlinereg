<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Registration Form</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #e0f7fa;
        }

        #container {
            width: 50%;
            margin: auto;
        }

        .formContainer {
            background: #ffffff;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #b2ebf2;
            border-radius: 5px;
            box-shadow: 0px 0px 10px 0px #80deea;
        }

        h1 {
            color: #00796b;
            text-align: center;
        }

        .explanation {
            font-size: 0.9em;
            color: #555;
            margin-bottom: 10px;
        }

        label, input {
            display: block;
            margin-bottom: 15px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            border: 1px solid #d0d0d0;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #b2ebf2;
        }

        #contactOption {
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div id="container">
        <div class="formContainer">
            <h1>Student Library Card Registration</h1>
            <form onsubmit="addStudent(event, this)">
                <label>First Name: <input required type="text" name="firstName"></label>
                <label>Middle Name: <input type="text" name="middleName"></label>
                <label>Last Name: <input required type="text" name="lastName"></label>
                <p class="explanation">Preferred Name: "Is this your dead name?"</p>
                <label>Yes<input type="radio" name="deadname" value="yes" onclick="showPreferredName()"></label>
                <label>No<input type="radio" name="deadname" value="no" checked onclick="hidePreferredName()"></label>
                <div id="preferredName" style="display:none;">
                    <p>Please indicate the name that should appear on your account and be used for email/text notifications.</p>
                    <label>First Name: <input type="text" name="preferredFirstName"></label>
                    <label>Middle Name: <input type="text" name="preferredMiddleName"></label>
                    <label>Last Name: <input type="text" name="preferredLastName"></label>
                    <input type="checkbox" name="useIDName"> Please check this box if you wish to have your ID name used for print and phone notifications.<br>
                </div>
                <label>Teacher Name: <input required type="text" name="teacherName"></label>
                <label>School: <input required type="text" name="school"></label>
                <label>Grade Level: <input required type="text" name="gradeLevel"></label>
                <div id="contactOption">
                    <label>Contact Option:</label>
                    <select name="contactOption" onchange="showContactField(this.value)">
                        <option value="email">Email</option>
                        <option value="text">Text Message</option>
                    </select>
                    <label id="contactLabel">Your Email: <input required type="email" name="contact"></label>
                </div>
                <input type="submit" value="Submit">
            </form>
        </div>
        <div id="databasePreview" style="display:none;">
            <table>
                <thead>
                    <tr>
                        <th>First Name</th>
                        <th>Middle Name</th>
                        <th>Last Name</th>
                        <th>Preferred Name</th>
                        <th>Teacher Name</th>
                        <th>School</th>
                        <th>Grade Level</th>
                        <th>Contact</th>
                    </tr>
                </thead>
                <tbody id="databaseBody">
                </tbody>
            </table>
        </div>
    </div>

    <script>
        function showPreferredName() {
            document.getElementById('preferredName').style.display = 'block';
        }

        function hidePreferredName() {
            document.getElementById('preferredName').style.display = 'none';
        }

        function showContactField(value) {
            const contactLabel = document.getElementById('contactLabel');
            if(value === 'email') {
                contactLabel.innerHTML = 'Your Email: <input required type="email" name="contact">';
            } else {
                contactLabel.innerHTML = 'Your Phone: <input required type="tel" name="contact">';
            }
        }

        function addStudent(event, form) {
            event.preventDefault();
            let formData = new FormData(form);
            let databasePreview = document.getElementById('databasePreview');
            let databaseBody = document.getElementById('databaseBody');

            let row = document.createElement('tr');

            let fields = ['firstName', 'middleName', 'lastName', 'preferredFirstName', 'teacherName', 'school', 'gradeLevel', 'contact'];

            fields.forEach(field => {
                let td = document.createElement('td');
                td.textContent = formData.get(field) || '-';
                row.appendChild(td);
            });

            databaseBody.appendChild(row);
            databasePreview.style.display = 'block';

            form.reset();
        }
    </script>
</body>
</html>
